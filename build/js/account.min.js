(()=>{"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){for(var o=0;o<t.length;o++){var c=t[o];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(e,n(c.key),c)}}function n(t){var n=function(t,n){if("object"!=e(t)||!t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var c=o.call(t,n||"default");if("object"!=e(c))return c;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"==e(n)?n:n+""}var o=function(){return e=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:350;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._target=t,this._duration=n},(n=[{key:"show",value:function(){var e=this._target;if(!e.classList.contains("collapsing")&&!e.classList.contains("_show")){e.classList.remove("_collapse");var t=e.offsetHeight;e.style.height=0,e.style.overflow="hidden",e.style.transition="height ".concat(this._duration,"ms ease"),e.classList.add("collapsing"),e.offsetHeight,e.style.height="".concat(t,"px"),window.setTimeout((function(){e.classList.remove("collapsing"),e.classList.add("_collapse"),e.classList.add("_show"),e.style.height="",e.style.transition="",e.style.overflow=""}),this._duration)}}},{key:"hide",value:function(){var e=this._target;!e.classList.contains("collapsing")&&e.classList.contains("_show")&&(e.style.height="".concat(e.offsetHeight,"px"),e.offsetHeight,e.style.height=0,e.style.overflow="hidden",e.style.transition="height ".concat(this._duration,"ms ease"),e.classList.remove("_collapse"),e.classList.remove("_show"),e.classList.add("collapsing"),window.setTimeout((function(){e.classList.remove("collapsing"),e.classList.add("_collapse"),e.style.height="",e.style.transition="",e.style.overflow=""}),this._duration))}},{key:"toggle",value:function(){this._target.classList.contains("_show")?this.hide():this.show()}}])&&t(e.prototype,n),o&&t(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,n,o}();function c(){document.querySelectorAll("[data-select]").forEach((function(e){var t=e.querySelectorAll(".select");t&&t.forEach((function(t){var n=t.querySelectorAll(".select__list-item"),c=t.querySelector(".select__button"),s=n.length>0?n[0]:null;function l(e){null!==e&&(s.focus(),s.classList.remove("_selected"),e.focus(),e.classList.add("_selected"),s=e)}t.addEventListener("click",(function(e){var n=e.target;if(n.closest(".select__button")){var o=document.querySelector("._active-collapse");a(t),n.closest(".select__box-button")&&(s=n.closest(".select__box-button").nextElementSibling.querySelector("._selected")),n.closest(".select").classList.contains("_active-collapse")||c.blur(),o&&o!==t&&a(o)}})),0!==n.length&&[].forEach.call(n,(function(e){e.addEventListener("click",(function(n){(s=this).focus(),c.value=e.textContent;var o=t.querySelector("._selected");u(e),o&&o!==e&&u(o),r()}))})),e.addEventListener("keydown",(function(e){(e=e||window.e).preventDefault();e.target;if("ArrowUp"==e.key)l(s.previousElementSibling);else if("ArrowDown"==e.key){l(s.nextElementSibling)}else"Enter"==e.key&&(r(),i())}));var a=function(e){var t=new o(e.closest(".select").querySelector("._collapse"));e.classList.contains("_active-collapse")?(e.classList.remove("_active-collapse"),t.toggle()):(e.classList.add("_active-collapse"),t.toggle())};function i(){document.querySelectorAll(".select").forEach((function(e){e.classList.contains("_active-collapse")&&a(e)}))}function r(){for(var t=e.getElementsByClassName("select__button"),n=0;n<t.length;n++)t[n].value=s?s.textContent:"",c.blur()}document.addEventListener("keydown",(function(e){"Tab"!==e.key&&"Escape"!==e.key||(c.blur(),i())})),document.addEventListener("click",(function(e){var t=e.target.classList;switch(!0){case t.contains("select__button"):case t.contains("select__list-item"):break;default:i()}}));var u=function(e){var t=new o(e.closest("._collapse"));e.classList.contains("_selected")?(e.classList.remove("_selected"),t.toggle(),e.closest(".select").classList.remove("_active-collapse")):e.classList.add("_selected")}}))}))}var s=document.querySelector(".toggle-wrap"),l=document.querySelector(".personal-account__column");s.addEventListener("click",(function(){a.classList.toggle("_open"),l.classList.toggle("_opened-menu")}));var a=document.querySelector(".toggle-menu");var i=window.scrollY;window.addEventListener("scroll",(function(){var e=window.scrollY,t=window.innerWidth;t<690?(l.style.top="47px",i>e?(l.style.top="47px",l.style.height="calc(100% - (46px + 58px))"):i>150&&(l.style.height="100%",l.style.top="0"),i=e):t>690&&(l.style.top="113.76px",i>e?(l.style.top="113.76px",l.style.height="calc(100% - 113.76px)"):i>150&&(l.style.height="100%",l.style.top="0"),i=e)}));var r=document.querySelector(".user-bar__list");document.querySelectorAll(".user-bar__item").forEach((function(e){e.addEventListener("click",(function(){var t=r.querySelector("._active");u(e),t&&t!==e&&u(t),t&&t===e&&u(e)}))}));var u=function(e){e.classList.contains("_active")?(e.classList.remove("_active"),a.classList.remove("_open"),l.classList.remove("_opened-menu")):e.classList.add("_active")};document.addEventListener("DOMContentLoaded",(function(){var e=document.querySelector(".personal-account__personal-data");function t(){document.querySelectorAll(".link").forEach((function(n){n.addEventListener("click",(function(){!function(n){fetch("user-data/".concat(n,".html")).then((function(e){return e.text()})).then((function(s){var l,a,i;e.innerHTML=s,t(),"user-order-cart"===n?(c(),function(){var e=document.querySelectorAll("[data-quantity]"),t=document.querySelectorAll(".product-price");function n(){var e=0;t.forEach((function(t){var n=document.querySelector(".input-total"),o=(parseFloat(t.textContent.replace(/ /g,"").replace(",","."))||0)*(parseFloat(t.closest(".product-cart").querySelector("input").value)||1);e+=o,t.closest(".product-cart").querySelector(".product-cart__quantity-price").textContent=o.toLocaleString("ru-RU",{style:"currency",currency:"RUB",minimumFractionDigits:0}),n.innerHTML="Итого: "+e.toLocaleString()+'<i class="icon-rub"></i>'}))}e&&e.forEach((function(e){var t=!1;e.addEventListener("click",(function(e){var o=e.target;if(o.closest(".quantity__button")){var c=o.closest(".quantity").querySelector("input"),s=parseFloat(c.value)||0;o.classList.contains("quantity-add")?s+=1:o.classList.contains("quantity-remove")&&(s-=1),s=Math.max(.1,parseFloat(s.toFixed(2))),c.value=s.toFixed(2),s<=.1?function(e){e.closest(".quantity").querySelector(".quantity-remove").classList.add("_disabled")}(c):function(e){e.closest(".quantity").querySelector(".quantity-remove").classList.remove("_disabled")}(c),n(),t=!1}}));var o=e.querySelector("input");o.addEventListener("input",(function(e){var n=o.selectionStart;if(this.value=this.value.replace(/[^0-9.]/g,""),(this.value.match(/\./g)||[]).length>1){var c=this.value.lastIndexOf("."),s=Math.max(n,c),l=Math.min(n,c);this.value=this.value.slice(0,l)+this.value.slice(l+1,s)+this.value.slice(s+1),n--}else this.value.includes(".")&&!t&&(n++,t=!0);o.setSelectionRange(n,n)})),o.addEventListener("keydown",(function(e){"Enter"===e.key&&(e.preventDefault(),n())}));var c=document.createElement("span");c.textContent=" м",c.style.marginLeft="-5px",o.parentNode.appendChild(c)})),n()}(),l=document.querySelector(".send-order"),a=new o(l.querySelector("._collapse")),i=document.querySelector(".order-place__checkbox"),document.querySelector(".order-place__form-button").addEventListener("click",(function(){var e=document.querySelector(".order-place__send-button"),t=document.querySelector(".order-place__form-button");a.toggle(),e.style.display="block",t.style.display="none",i.style.display="block"}))):"feed-back"===n&&(console.log("yes"),c()),"history-order"===n&&function(){var e=document.getElementById("start-date"),t=document.getElementById("end-date");function n(){var n=new Date(e.value),o=new Date(t.value);n>o?alert('Дата "до" не может быть раньше даты "от".'):console.log("Выбранный диапазон дат: От ".concat(n.toLocaleDateString()," до ").concat(o.toLocaleDateString()))}e.addEventListener("change",(function(){console.log("Start date selected:",e.value),n()})),t.addEventListener("change",(function(){console.log("End date selected:",t.value),n()}))}()})).catch((function(t){e.innerHTML="Error loading content"}))}(this.getAttribute("data-page"))}))}))}t()}))})();