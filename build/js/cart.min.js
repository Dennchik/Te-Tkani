(()=>{"use strict";document.querySelector(".page__header"),document.querySelectorAll(".burger-button"),document.querySelector(".header__button-search"),document.querySelector(".page__sidebar-catalog"),document.querySelector(".page__buttom-menu"),document.querySelector(".sidebar-search__icon-cancel"),document.querySelectorAll(".menu-catalog__parent-menu"),document.querySelector(".menu-catalog"),document.querySelector(".catalog__categories"),document.querySelectorAll(".submenu-parent"),document.querySelectorAll(".login-container__user-button");!function(){var e=document.querySelectorAll("[data-quantity]"),t=document.querySelectorAll(".product-price");function r(){var e=0;t.forEach((function(t){var r=document.querySelector(".input-total"),n=(parseFloat(t.textContent.replace(/ /g,"").replace(",","."))||0)*(parseFloat(t.closest(".product-cart").querySelector("input").value)||1);e+=n,t.closest(".product-cart").querySelector(".product-cart__quantity-price").textContent=n.toLocaleString("ru-RU",{style:"currency",currency:"RUB",minimumFractionDigits:0}),r.innerHTML="Итого: "+e.toLocaleString()+'<i class="icon-rub"></i>'}))}e&&e.forEach((function(e){var t=!1;e.addEventListener("click",(function(e){var n=e.target;if(console.log(n),n.closest(".quantity__button")){var c=n.closest(".quantity").querySelector("input"),o=parseFloat(c.value)||0;n.classList.contains("quantity-add")?o+=1:n.classList.contains("quantity-remove")&&(o-=1),o=Math.max(.1,parseFloat(o.toFixed(2))),c.value=o.toFixed(2),o<=.1?function(e){e.closest(".quantity").querySelector(".quantity-remove").classList.add("_disabled")}(c):function(e){e.closest(".quantity").querySelector(".quantity-remove").classList.remove("_disabled")}(c),r(),t=!1}}));var n=e.querySelector("input");n.addEventListener("input",(function(e){var r=n.selectionStart;if(this.value=this.value.replace(/[^0-9.]/g,""),(this.value.match(/\./g)||[]).length>1){var c=this.value.lastIndexOf("."),o=Math.max(r,c),a=Math.min(r,c);this.value=this.value.slice(0,a)+this.value.slice(a+1,o)+this.value.slice(o+1),r--}else this.value.includes(".")&&!t&&(r++,t=!0);n.setSelectionRange(r,r)})),n.addEventListener("keydown",(function(e){"Enter"===e.key&&(e.preventDefault(),r())}));var c=document.createElement("span");c.textContent=" м",c.style.marginLeft="-5px",n.parentNode.appendChild(c)})),r()}(),document.querySelector(".order-place__form-button").addEventListener("click",(function(){document.querySelector(".send-order");var e=document.querySelector(".order-place").cloneNode(!0),t=document.querySelector(".send-order__order-place");t.innerHTML="",t.appendChild(e),t.classList.add("place-order")}))})();