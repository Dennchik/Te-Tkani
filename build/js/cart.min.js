(()=>{"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,o(s.key),s)}}function o(t){var o=function(t,o){if("object"!=e(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var s=n.call(t,o||"default");if("object"!=e(s))return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===o?String:Number)(t)}(t,"string");return"symbol"==e(o)?o:o+""}var n,s,c=function(){return e=function e(t){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:350;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._target=t,this._duration=o},(o=[{key:"show",value:function(){var e=this._target;if(!e.classList.contains("collapsing")&&!e.classList.contains("_show")){e.classList.remove("_collapse");var t=e.offsetHeight;e.style.height=0,e.style.overflow="hidden",e.style.transition="height ".concat(this._duration,"ms ease"),e.classList.add("collapsing"),e.offsetHeight,e.style.height="".concat(t,"px"),window.setTimeout((function(){e.classList.remove("collapsing"),e.classList.add("_collapse"),e.classList.add("_show"),e.style.height="",e.style.transition="",e.style.overflow=""}),this._duration)}}},{key:"hide",value:function(){var e=this._target;!e.classList.contains("collapsing")&&e.classList.contains("_show")&&(e.style.height="".concat(e.offsetHeight,"px"),e.offsetHeight,e.style.height=0,e.style.overflow="hidden",e.style.transition="height ".concat(this._duration,"ms ease"),e.classList.remove("_collapse"),e.classList.remove("_show"),e.classList.add("collapsing"),window.setTimeout((function(){e.classList.remove("collapsing"),e.classList.add("_collapse"),e.style.height="",e.style.transition="",e.style.overflow=""}),this._duration))}},{key:"toggle",value:function(){this._target.classList.contains("_show")?this.hide():this.show()}}])&&t(e.prototype,o),n&&t(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,o,n}(),l={header:document.querySelector(".page__header"),bttns:document.querySelector(".burger-button"),bttnSearch:document.querySelector(".header__button-sidebarcatalog"),burgerButton:document.querySelector(".burger-button"),sidebarCatalog:document.querySelector(".page__sidebar-catalog"),sidebarMenu:document.querySelector(".page__sidebar-menu"),bottomMenu:document.querySelector(".page__buttom-menu"),cancelButtonsCatalog:document.querySelector(".catalog-cansel"),cancelButtonsMenu:document.querySelector(".menu-cansel"),menuParents:document.querySelectorAll(".menu-catalog__parent-menu"),menuCatalog:document.querySelector(".menu-catalog"),catalogCategories:document.querySelector(".catalog__categories"),submenuParents:document.querySelectorAll(".submenu-parent"),userButtons:document.querySelectorAll(".login-container__user-button")};console.log(l.cancelButtonsCatalog),function(){var e=document.querySelectorAll("[data-quantity]"),t=document.querySelectorAll(".product-price");function o(){var e=0;t.forEach((function(t){var o=document.querySelector(".input-total"),n=(parseFloat(t.textContent.replace(/ /g,"").replace(",","."))||0)*(parseFloat(t.closest(".product-cart").querySelector("input").value)||1);e+=n,t.closest(".product-cart").querySelector(".product-cart__quantity-price").textContent=n.toLocaleString("ru-RU",{style:"currency",currency:"RUB",minimumFractionDigits:0}),o.innerHTML="Итого: "+e.toLocaleString()+'<i class="icon-rub"></i>'}))}e&&e.forEach((function(e){var t=!1;e.addEventListener("click",(function(e){var n=e.target;if(console.log(n),n.closest(".quantity__button")){var s=n.closest(".quantity").querySelector("input"),c=parseFloat(s.value)||0;n.classList.contains("quantity-add")?c+=1:n.classList.contains("quantity-remove")&&(c-=1),c=Math.max(.1,parseFloat(c.toFixed(2))),s.value=c.toFixed(2),c<=.1?function(e){e.closest(".quantity").querySelector(".quantity-remove").classList.add("_disabled")}(s):function(e){e.closest(".quantity").querySelector(".quantity-remove").classList.remove("_disabled")}(s),o(),t=!1}}));var n=e.querySelector("input");n.addEventListener("input",(function(e){var o=n.selectionStart;if(this.value=this.value.replace(/[^0-9.]/g,""),(this.value.match(/\./g)||[]).length>1){var s=this.value.lastIndexOf("."),c=Math.max(o,s),l=Math.min(o,s);this.value=this.value.slice(0,l)+this.value.slice(l+1,c)+this.value.slice(c+1),o--}else this.value.includes(".")&&!t&&(o++,t=!0);n.setSelectionRange(o,o)})),n.addEventListener("keydown",(function(e){"Enter"===e.key&&(e.preventDefault(),o())}));var s=document.createElement("span");s.textContent=" м",s.style.marginLeft="-5px",n.parentNode.appendChild(s)})),o()}(),n=document.querySelector(".send-order"),s=new c(n.querySelector("._collapse")),document.querySelector(".order-place__form-button").addEventListener("click",(function(){var e=document.querySelector(".cart-page__title>h1"),t=(document.querySelector(".order-place__send-order"),document.querySelector(".order-place__send-button")),o=document.querySelector(".order-place__form-button");e.innerHTML="оформление заказа",s.toggle(),t.style.display="block",o.style.display="none"})),document.querySelectorAll("[data-select]").forEach((function(e){var t=e.querySelectorAll(".select");t&&t.forEach((function(t){var o=t.querySelectorAll(".select__list-item"),n=t.querySelector(".select__button"),s=o.length>0?o[0]:null;function l(e){null!==e&&(s.focus(),s.classList.remove("_selected"),e.focus(),e.classList.add("_selected"),s=e)}t.addEventListener("click",(function(e){var o=e.target;if(o.closest(".select__button")){var c=document.querySelector("._active-collapse");a(t),o.closest(".select__box-button")&&(s=o.closest(".select__box-button").nextElementSibling.querySelector("._selected")),o.closest(".select").classList.contains("_active-collapse")||n.blur(),c&&c!==t&&a(c)}})),0!==o.length&&[].forEach.call(o,(function(e){e.addEventListener("click",(function(o){(s=this).focus(),n.value=e.textContent;var c=t.querySelector("._selected");u(e),c&&c!==e&&u(c),i()}))})),e.addEventListener("keydown",(function(e){(e=e||window.e).preventDefault(),e.target,"ArrowUp"==e.key?l(s.previousElementSibling):"ArrowDown"==e.key?l(s.nextElementSibling):"Enter"==e.key&&(i(),r())}));var a=function(e){var t=new c(e.closest(".select").querySelector("._collapse"));e.classList.contains("_active-collapse")?(e.classList.remove("_active-collapse"),t.toggle()):(e.classList.add("_active-collapse"),t.toggle())};function r(){document.querySelectorAll(".select").forEach((function(e){e.classList.contains("_active-collapse")&&a(e)}))}function i(){for(var t=e.getElementsByClassName("select__button"),o=0;o<t.length;o++)t[o].value=s?s.textContent:"",n.blur()}document.addEventListener("keydown",(function(e){"Tab"!==e.key&&"Escape"!==e.key||(n.blur(),r())})),document.addEventListener("click",(function(e){var t=e.target.classList;switch(!0){case t.contains("select__button"):case t.contains("select__list-item"):break;default:r()}}));var u=function(e){var t=new c(e.closest("._collapse"));e.classList.contains("_selected")?(e.classList.remove("_selected"),t.toggle(),e.closest(".select").classList.remove("_active-collapse")):e.classList.add("_selected")}}))}))})();